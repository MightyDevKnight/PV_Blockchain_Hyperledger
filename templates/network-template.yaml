# ORG=citi DOMAIN=pr.synswap.com ARTIFACTS_DIR=/home/oleg/workspace/synswap-portfolio/artifacts envsubst < templates/network-template.yaml > crypto-config/network.yaml

name: "Network"
version: "1.0"

client:
  organization: ${ORG}
  credentialStore:
    path: "hfc-kvs/${ORG}"
    cryptoStore:
      path: "hfc-cvs/${ORG}"

organizations:
  ${ORG}:
    mspid: ${ORG}MSP
#    mspid: ${ORG}
    peers:
      - peer0.${ORG}.${DOMAIN}
    certificateAuthorities:
      - ${ORG}
    adminPrivateKey:
    # TODO copy generated _sk file into sk.pem
      path: ${ARTIFACTS_DIR}/crypto-config/peerOrganizations/${ORG}.${DOMAIN}/users/Admin@${ORG}.${DOMAIN}/msp/keystore/sk.pem
    signedCert:
      path: ${ARTIFACTS_DIR}/crypto-config/peerOrganizations/${ORG}.${DOMAIN}/users/Admin@${ORG}.${DOMAIN}/msp/signcerts/Admin@${ORG}.${DOMAIN}-cert.pem

peers:
  peer0.${ORG}.${DOMAIN}:
    url: grpcs://localhost:7051
    grpcOptions:
      ssl-target-name-override: peer0.${ORG}.${DOMAIN}
      grpc.keepalive_time_ms: 600000
    tlsCACerts:
      path: ${ARTIFACTS_DIR}/crypto-config/peerOrganizations/${ORG}.${DOMAIN}/peers/peer0.${ORG}.${DOMAIN}/msp/tlscacerts/tlsca.${ORG}.${DOMAIN}-cert.pem

certificateAuthorities:
  ${ORG}:
    url: https://localhost:7054
    httpOptions:
      verify: false
    tlsCACerts:
      path: ${ARTIFACTS_DIR}/crypto-config/peerOrganizations/${ORG}.${DOMAIN}/ca/ca.${ORG}.${DOMAIN}-cert.pem
    registrar:
      - enrollId: admin
        enrollSecret: adminpw
    caName: default
